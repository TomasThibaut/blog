这篇Blog的源自今天同事对RN的疑问。
这里我想从两个方面来阐述一下我的对RN的看法：RN到底是一个什么东西？它有什么优势呢？

## ReactNative到底是什么呢？
我的看法是RN就是一个容器，这个容器负责执行你的Js代码，并且把UI渲染出来。这时候你可能就会疑问，那和浏览器有什么区别？

RN在执行Js这一层和浏览器区别不大，都是单线程运行Js，稍微不同的是RN底层用了JSCore来运行Js，JSCore的版本比较新，并且可以随时升级到最新，这样我们就可以使用比较新的Js语法，也无需像WebView那样处理Js的兼容性问题。另外，RN内置了Babel，使得我们可以直接书写ES6，开发更加便捷。  
 <br />

但是在UI渲染这一层，RN和Webview有着本质的区别，RN所有的UI都是纯Native的，不像Webview所有的UI都是Webview渲染，这一点也决定了RN绝大多数情况下比Webview流畅，在UI各种特性支持（比如手势处理）上，也比Webview强大很多。更重要的是，我们可以直接在Native层扩展RN，自己定义可以在Js中使用的Native控件，这就给程序的可定制性以及优化留下了非常大的空间。  
 <br />

另外在使用Webview的时候，尤其是Android平台，严重的碎片化带来大量令人头疼的兼容性问题，这个在RN上将会好很多。  
 <br />

RN在布局上使用了flexbox的一个子集，这点可能比webview要弱一些，但是鉴于不同版本webview对flexbox的支持，以及各种兼容性问题，这点上RN其实并不弱。  
 <br />

## ReactNative有什么优势？
首先，我想声明一个观点，那就是在我看来，web的开发方式远比iOS和Android更加方便和高效，web上层出不穷的各种库和框架也远比Android和iOS的各种库和框架方便许多。web上我们可以方便的使用各种mvvm框架，及时预览效果（想想大型Android&iOS项目的编译时间）。如果Android和iOS能够用上及时预览技术，能够用上各种强大的mvvm框架，想想我们的开发效率会提高多少？RN就是能给我们带来这种极致开发体验的技术。另外RN开发中，我们使用的是类似css的方式来定制样式，样式和模板分离，而Android开发至今仍然是模板和样式纠缠在一起。  
 <br />


另外，就是万年不变的语言之争。多年之前，我曾是Ruby和C#的忠实粉丝，自从12年投入Node.js和前端怀抱之后，我最爱的语言已经慢慢变成了Js。NPM（Js模块仓库）已经变成了拥有模块数量最多的代码仓库，基本快是其他语言之和了，GitHub上使用最多的语言也是Js，Node.js正在各大公司大放光彩，前端开发规模越来越大，ES6 ES7为Js带来各种新的便捷的语法特性（想想Android还是用Java6，即使用了Retrolambda依然不够爽）。  
 <br />

第三点就是动态UI，这一点RN有着和Web差不多的表现但是胜在性能。有的同学提到了我可以服务端通过下发JSON，客户端根据数据类型动态生成不同类型的UI。真正用过这个的同学应该能体会到这会给客户端埋下多少坑，要防止运营配置数据错误，可用的数据类型仅限于某些，想要更新新的类型仍然要发版本。而使用RN这种技术，由于Js天然动态性，我们可以随时下发数据和代码，随时定制我们的UI。  
 <br />

第四点就是热更新，HotFix，原生的各种热更实现起来都太复杂，有的甚至需要重启app才生效。但是使用Js语言就不一样了，动态语言的一大好处就是可以随时执行，随时替换，使用RN之后，就可以做到随时运行更新我们的Js代码，实现起来会比原生的方案简单很多。  
 <br />

第五点就是跨平台的开发，有了VirtualDom的概念之后，其实你一套代码做的UI，是可以被适配到多个平台的，目前已经有iOS，Android，Canvas，Mac，PC。其实我们可以看到，在桌面开发中NodeWebKit已经被越来越多的厂商接受，那么RN的方式，我觉得应该也是一个趋势。  
 <br />

## 说了这么多好处，下面我也谈谈我认为的RN的缺点。
首先就是我认为React的学习曲线太高，Facebook又提出了Flux的架构，我觉得更增加了学习曲线。相比React，其实我是更喜欢Vue.js这个轻量强大的MVVM库的，这也是我为什么更喜欢阿里出的weex（VueNative）的原因。  
 <br />

其次RN目前还不是非常稳定，尤其在Android上面还有比较多的坑，1.0也至今未释放出来。  
 <br />

第三，就是使用RN之后app体积的增大，这个问题比较严重，当然可以通过替换底层的OkHttp，Fresco等来实现体积减小，尤其是RN和原生混合开发的时候，一般会选择把网络库和图片库替换成自己公司的库，这样可以减少一部分体积。另外还可以通过动态下发代码的方式来进一步减少体积。  
 <br />

第四就是RN目前只支持Android4.1。如果你的app是只支持4.0的话，不如考虑再进一步，到4.1嘛。  
 <br />

另外有同事提到，这次QZone放出来的资料显示，RN的fps对比webview反而下降。我的理解是，QZone毕竟第一次使用RN，然而腾讯在webview方面的优化，是众所周知非常强大的，fps降低了一点我觉得可以理解，相信QZone团队一定会将数据赶超上去。


## 最后
我是一个前端大融合，全栈的信徒，我一直坚信web的开发方式目前是最便捷的，也应该是各个平台最终的目标。希望客户端开发能有更加先进便捷的技术出现。
